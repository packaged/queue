language: php

services:
  - rabbitmq

php:
  - 5.6
  - 7.0
  - hhvm

build:
  ci:
    - if [ "$SHIPPABLE_PHP_VERSION" == 5.6 ]; then
        wget https://xdebug.org/files/xdebug-2.4.0.tgz;
        tar -xvzf xdebug-2.4.0.tgz;
        cd xdebug-2.4.0;
        phpize;
        ./configure;
        make;
        make install;
        cd -;
      fi
    - composer self-update
    - composer install --no-progress --no-interaction --prefer-source
    - vendor/phpunit/phpunit/phpunit --log-junit shippable/testresults/junit.xml --coverage-xml shippable/codecoverage -c phpunit.xml
